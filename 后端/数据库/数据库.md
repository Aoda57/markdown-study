# 数据库
[关系数据库与非关系数据库比较](https://my.oschina.net/u/1773689/blog/364548)

[非关系数据库存储形式](https://www.cnblogs.com/ynyhl/p/9253025.html)
## MongoDB 
[MongoDB教程](https://www.runoob.com/mongodb/mongodb-databases-documents-collections.html)   
[MongoDB文档存储结构](https://www.cnblogs.com/chenwenyin/p/13549924.html)
> MongoDB是一个基于分布式文件存储的数据库。由C++语言编写。旨在为WEB应用提供可扩展的高性能数据存储解决方案。  ----百度    
>  MongoDB是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。它支持的数据结构非常松散，是类似json的bson格式，因此可以存储比较复杂的数据类型。Mongo最大的特点是它支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。 ---百度
### MongDB缺点  
不适用的场景如下：
1）要求高度事务性的系统。
2）传统的商业智能应用。
3）复杂的跨文档（表）级联查询。
## MySQL+MongoDB区别 
[MongoDB与MySQL对比](https://www.cnblogs.com/Anderson-An/p/10162993.html)  
[什么时候用NoSQL](https://www.cnblogs.com/Ring1981/p/4408916.html)

![MySQL VS MongoDB](../images/mysqlVSmongodb.png)
> 关系型数据库：采用关系模型组织数据，以行和列存储，以便于用户理解，这一系列的行和列被称为表，一组表组成数据库。简单来说关系模型就是二维表格模型。而一个关系数据库有二维表和质检关系组成的数据组织   
> 非关系数据库，简称NoSQL(Not only sql)，他们不保证关系数据的ACID特性，例如，以键值对存储，且结构不固定,NoSQL用于超大规模数据的存储。（例如谷歌或Facebook每天为他们的用户收集万亿比特的数据）。这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展.     
> 关系型数据库遵循ACID规则
事务在英文中是transaction，和现实世界中的交易很类似，它有如下四个特性：  
1、A (Atomicity) 原子性
原子性很容易理解，也就是说事务里的所有操作要么全部做完，要么都不做，事务成功的条件是事务里的所有操作都成功，只要有一个操作失败，整个事务就失败，需要回滚。比如银行转账，从A账户转100元至B账户，分为两个步骤：1）从A账户取100元；2）存入100元至B账户。这两步要么一起完成，要么一起不完成，如果只完成第一步，第二步失败，钱会莫名其妙少了100元。       
2、C (Consistency) 一致性   
一致性也比较容易理解，也就是说数据库要一直处于一致的状态，事务的运行不会改变数据库原本的一致性约束。  例如现有完整性约束a+b=10，如果一个事务改变了a，那么必须得改变b，使得事务结束后依然满足a+b=10，否则事务失败。  
3、I (Isolation) 独立性
所谓的独立性是指并发的事务之间不会互相影响，如果一个事务要访问的数据正在被另外一个事务修改，只要另外一个事务未提交，它所访问的数据就不受未提交事务的影响。
比如现在有个交易是从A账户转100元至B账户，在这个交易还未完成的情况下，如果此时B查询自己的账户，是看不到新增加的100元的。   
4、D (Durability) 持久性
持久性是指一旦事务提交后，它所做的修改将会永久的保存在数据库上，即使出现宕机也不会丢失。

![NoSql分类](../images/NoSql分类.png)

## ORM框架
 [ORM ODM](https://www.jianshu.com/p/ac6ada3a47f1)
 [ORM教程](http://www.ruanyifeng.com/blog/2019/02/orm-tutorial.html)
> 关系对象映射---Object/Relational Mapping简写，即用面向对象的方法去操作关系数据库。关系数据库中，有多个表组成，表又由每条记录组成，此时，我们将表（table）看成类--class，表的字段（filed）看成对象的属性--attribute，每条记录（record）看成对象--object，这样我们就建立了一一对应的关系。
### 特点
1. 使用对象封装了对数据库的操作，这样无需了解数据库语句，就可以完成对数据库的检索
2. 数据模型在一个地方定义，可以方便维护，而且语义简单，通俗易懂
3.  ORM就是天生的MVC架构，他是Model层，代码比较清晰
4. ORM现成的工具可以帮你自动完成数据消毒、预处理、事务等操作。

缺点：
1. 单独的精力去学习工具的使用
2. 复杂的数据库查询，ORM无法满足或者性能较差
3.  开发人员缺乏对数据库的认知，无法了解数据库的操作，也无法自己实现特殊的数据库查询。
### ORM基本的命名规范
1. Class对应table，首字母大写，单数，但是表是复数，且全小写，如：users（table），对于class是User
2. 名字含有多个单词，使用首字母大写的驼峰命名法，表的命名规则hi下划线的全小写的单词
3. 每个表需要有一个主键字段--id，其他的外键使用单数的表名+下划线+id。
### ORM框架的对比
[对比说明](https://www.cnblogs.com/nayek/p/12917504.html)  
ThinkJS
Mongoose：
仅支持MongoDB
## 数据库语句的使用