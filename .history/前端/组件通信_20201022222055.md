# 组件通信
[Vue组件通信六种方式](https://segmentfault.com/a/1190000019208626)  

![组件通信](./../图片/组件通信.png)   
## 父子组件通信（针对Vue）  
1. props  
[props说明](https://cn.vuejs.org/v2/api/#props)  
 使用
 父组件内使用子组件，并在子组件内绑定属性值
 ``` javascript
 <Parent>
 <child v-bind:data=data />
 </Parent>

 //子组件内
 export default {
     name:"Child",
     props:{
         data:{
             type:Array,//类型
             default:[],//默认值
             require:false,//是否必须
             validator:function(){//自定义函数验证
                 return 
             }
         }
     }
     data(){
         return {    
         }
     }
 }
 ```
> 拓展：子组件中的数据有三种形式：
> 1. props，父组件传下来的值
> 2. data， 自己申明的值
> 3. computed,计算属性，

## 子组件向父组件传值
1. 事件  
[v-on说明](https://cn.vuejs.org/v2/api/#v-on)  
[vm.$emit说明](https://cn.vuejs.org/v2/api/#vm-emit)  
子组件向父组件传值，通过事件，子组件触发当前实例上的事件，父组件监听事件
``` javascript
<Parent v-on:updateParent="updateName">
<child/>
</Parent>
export default {
    name:'Parent',
    methods:{
        updateName(){

        }
    }
}
 //子组件内
 export default {
     name:"Child",
     data(){
         return {  
             name:"hello"  
         }
     },
     methods:{
         updateParentName(){
             this.$emit("updateParent",name)
         }
     }
 }

```
### 进阶
通过一个空的Vue实例作为中央事件总线（事件中心），用它来触发事件和监听事件,巧妙而
轻量地实现了任何组件间的通信，包括父子、兄弟、跨级。当我们的项目比较大时，可以选择更好的
状态管理解决方案vuex。
``` javascript
    var Event=new Vue();
    Event.$emit(事件名,数据);
    Event.$on(事件名,data => {});
```
使用时，直接引入这个Event，调用这个Event的事件方法。即可。

## Vuex
[Vuex说明](https://cn.vuejs.org/v2/guide/migration-vuex.html#ad)   
> Vuex采用发布订阅模式
## 单例模式
### 使用
重新创建一个class，作为store，里面存放需要保存的变量和需要的操作，对变量的修改，需要通过该类的方法修改。然后导出这个类的实例
``` javascript
class Store {
    constuctor(){
        this._state={
            time:0,
            data:[]
        }
    }
    get state(){
        return this._state;
    }
    set state(val){
        this._state=val
    }
    editTime(val){
        this._state.time=val
    }
} 
export const Store =new Store();
```
使用时，只需
``` javascript
imprt {Store }from 'Store'
```
这种方法类似Vuex，利用class，保存变量，和进行与页面无关的操作。

## 
